
{% extends "base.html" %}
{% block content %}

<div class="container">
    
	<div class="d3" style="padding-top: 20px; text-align: center;"></div>
	
    <script src="/static/d3.js"></script>
    <script src="/static/underscore.js"></script>
    <script src="/static/mp_SimpleAliceInWonderland/out.js"></script>
    
    <script>
    var w = 800;
    var h = 500;
	
	// Format the data for d3
	var dataset =
		_.map(data,
				function (count, word) {
					return { word: word, count: count } }
				);
	
	var maxCount = _.max(dataset, function (d) { return d.count; } ).count;
	
	var svg = d3.select("div.d3")
				.append("svg")
				.attr("width", w)
				.attr("height", h + 50);
	

	svg.selectAll("rect")
	   .data(dataset)
	   .enter()
	   .append("rect")
	   .attr("x", function(d, i) {
			return i * (w / dataset.length);
	   })
	   .attr("y", function(d) {
			return h - (d.count / maxCount * h);
	   })
	   .attr("width", w / dataset.length)
	   .attr("height", function(d) {
			return d.count / maxCount * h;
	   })
	   .attr("fill", function(d) {
			var blue = parseInt(128 * Math.pow(d.count / maxCount, 0.5));
			return "rgb(0, 0, " + blue + ")";
	   });

	svg.selectAll("text.count")
	   .data(dataset)
	   .enter()
	   .append("text")
	   .text(function(d) {
			return d.count;
	   })
	   .attr("transform", "rotate(-90)")
	   .attr("y", function(d, i) {
			return i * (w / dataset.length) + 12;
	   })
	   .attr("x", function(d) {
			return -495;
	   })
	   .attr("font-family", "sans-serif")
	   .attr("font-size", "11px")
	   .attr("fill", "white")
	   ;
	    
	svg.selectAll("text.word")
	   .data(dataset)
	   .enter()
	   .append("text")
	   .text(function(d) {
			return d.word;
	   })
	   .attr("transform", "rotate(-90)")
	   .attr("text-anchor", "middle")
	   .attr("y", function(d, i) {
			return i * (w / dataset.length) + 12;
	   })
	   .attr("x", function(d) {
			return -525;
	   })
	   .attr("font-family", "sans-serif")
	   .attr("font-size", "11px")
	   .attr("fill", "black")
	   ;
	   
	   
    </script>


</div>

{% endblock %}
